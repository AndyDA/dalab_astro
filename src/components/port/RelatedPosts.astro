---
import { getRelatedPortfolioItems } from '~/utils/portfolio';
import PortHighlightedPosts from '../widgets/PortHighlightedPosts.astro';
import type { Portfolio } from '~/types';

export interface Props {
  post: Portfolio;
}

const { post } = Astro.props;

const relatedPosts = post.tags ? await getRelatedPortfolioItems(post, 4) : [];
---

{
  relatedPosts.length > 0 ? (
    <PortHighlightedPosts
      classes={{
        container:
          'pt-0 lg:pt-0 md:pt-0 intersect-once intersect-quarter motion-safe:md:opacity-0 motion-safe:md:intersect:animate-fade',
      }}
      title='Related Projects'
      linkText='View All Projects'
      linkUrl='/portfolio'
      postIds={relatedPosts.map((post) => post.id)}
    />
  ) : null
}
